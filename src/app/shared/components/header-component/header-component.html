<header class="header">
  <div class="header-content">
    <div class="logo"><span class="logo-smart">Smart</span><span class="logo-koszyka">Koszyka</span></div>

    <button class="btn-menu" (click)="toggleMenu()" aria-label="Open settings menu">
      <span class="menu-icon">⚙️ Settings</span>
    </button>
  </div>
</header>

<!-- Settings Panel -->
@if (showMenu()) {
<div class="menu-overlay" (click)="closeMenu()" (keyup.enter)="closeMenu()" tabindex="0">
  <div class="settings-panel" (click)="$event.stopPropagation()" (keyup.enter)="$event.stopPropagation()" tabindex="0">
    <div class="panel-header">
      <h3>Settings</h3>
      <button class="btn-close" (click)="closeMenu()" aria-label="Close settings">✕</button>
    </div>

    <div class="panel-content">
      <!-- Theme Selection -->
      <div class="settings-section">
        <h4>Theme</h4>
        <div class="theme-options">
          <label class="theme-option">
            <input
              type="radio"
              name="theme"
              value="auto"
              [checked]="selectedTheme() === 'auto'"
              (change)="onThemeChange('auto')"
            />
            <span>Auto (System)</span>
          </label>
          <label class="theme-option">
            <input
              type="radio"
              name="theme"
              value="light"
              [checked]="selectedTheme() === 'light'"
              (change)="onThemeChange('light')"
            />
            <span>Light</span>
          </label>
          <label class="theme-option">
            <input
              type="radio"
              name="theme"
              value="dark"
              [checked]="selectedTheme() === 'dark'"
              (change)="onThemeChange('dark')"
            />
            <span>Dark</span>
          </label>
        </div>
      </div>

      <!-- Account Actions -->
      <div class="settings-section">
        <h4>Account</h4>
        <div class="account-actions">
          <button class="action-btn btn-view-account" (click)="onViewAccount()">View Account Info</button>
          <button class="action-btn btn-delete-account" (click)="onDeleteAccount()">Delete Account</button>
        </div>
      </div>

      <!-- Logout -->
      <div class="settings-section">
        <button class="btn-logout" (click)="onLogout()">Logout</button>
      </div>
    </div>
  </div>
</div>
}

<!-- Account Info Modal -->
@if (showAccountInfo()) {
<div class="modal-overlay" (click)="onCloseAccountModal()" (keyup.enter)="onCloseAccountModal()" tabindex="0">
  <div class="account-modal" (click)="$event.stopPropagation()" (keyup.enter)="$event.stopPropagation()" tabindex="0">
    <div class="modal-header">
      <h3>Account Information</h3>
      <button class="btn-close-modal" (click)="onCloseAccountModal()" aria-label="Close modal">✕</button>
    </div>

    @if (user$ | async; as user) {
    <div class="modal-content">
      <div class="info-row">
        <span class="info-label">First Name:</span>
        <span class="info-value">{{ user.firstName }}</span>
      </div>
      <div class="info-row">
        <span class="info-label">Last Name:</span>
        <span class="info-value">{{ user.lastName }}</span>
      </div>
      <div class="info-row">
        <span class="info-label">Email:</span>
        <span class="info-value">{{ user.email }}</span>
      </div>
    </div>
    }
  </div>
</div>
}
